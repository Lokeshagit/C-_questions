/*
6 5
0 0 0 0 0 0
0 0 0 0 0 0
0 0 1 1 0 0
0 0 1 1 0 0
0 0 0 0 0 0
0 1 1 4
2
2 3
*/

#include <bits/stdc++.h>
using namespace std;

int findSteps(int n, int m, vector<vector<int>>& grid, pair<int, int>& start, pair<int, int>& end, int p, vector<int>& B){
    vector<vector<int>> vis(n, vector<int>(m, 0));
    queue<pair<int, pair<int, int>>> q;
    q.push({0,{start.first, start.second}});
    vis[start.first][start.second] = 1;
    int dr[] = {0, 0, 1, -1};
    int dc[] = {1, -1, 0, 0};
    int min_t = INT_MAX;
    while(!q.empty()){
        int t = q.front().first;
        int r = q.front().second.first;
        int c = q.front().second.second;
        q.pop();
        cout << t << " -> (" << r << ", " << c << ")" << endl;
        if(r == end.first && c == end.second) return t;//min_t = min(min_t, t);
        for(int d=0; d<4; d++){
            for(int i=0; i<p; i++){
                for(int j=1; j<=B[i]; j++){
                    int nr = r+dr[d]*j;
                    int nc = c+dc[d]*j;
                    if(nr<0 || nr>=n || nc<0 || nc>=m || grid[nr][nc]) break;
                    if(vis[nr][nc]) continue;
                    if(j == B[i]){
                        vis[nr][nc] = 1;
                        q.push({t+1, {nr, nc}});
                    }
                }
                
            }
        }
    }
    return -1;//min_t == INT_MAX?-1:min_t;
}

int main() {
    int n, m;
    cin >> m >> n;
    
    vector<vector<int>> grid(n, vector<int>(m));
    for(int i=0; i<n; i++){
        for(int j=0; j<m; j++){
            cin >> grid[i][j];
        }
    }
    pair<int, int> start, end;
    cin >> start.first >> start.second >> end.first >> end.second;
    int p;
    cin >> p;
    vector<int> B(p);
    for(int i=0; i<p; i++){
        cin >> B[i];
    }
    
    int ans = findSteps(n, m, grid, start, end, p, B);
    cout << ans << endl;
    return 0;
}


--------------

6 5
0 0 0 1 1 0
0 0 0 1 0 0
0 1 1 1 0 0
0 1 1 1 0 0
0 0 0 0 0 0
0 1 1 4
2
2 3
0 -> (0, 1)
-1

---------------------

6 5
0 0 0 0 0 0
0 0 0 0 0 0
0 0 1 1 0 0
0 0 1 1 0 0
0 0 0 0 0 0
0 1 1 4
2
2 3
0 -> (0, 1)
1 -> (0, 3)
1 -> (0, 4)
1 -> (2, 1)
1 -> (3, 1)
2 -> (0, 5)
2 -> (0, 0)
2 -> (0, 2)
2 -> (2, 4)
2 -> (3, 4)
2 -> (4, 1)
2 -> (1, 1)
3 -> (2, 5)
3 -> (3, 5)
3 -> (2, 0)
3 -> (3, 0)
3 -> (4, 4)
3 -> (1, 4)
3

============================================

/*
10
0 1 1 2 4 2 1 0 3 3
output:
4
*/

#include <bits/stdc++.h>
using namespace std;

int solve(int n, vector<int>& nums){
    int ops = 0, maxVal = nums[0];
    for (int i = 1; i < n; i++) {
        auto diff = nums[i] - nums[i-1];
        if (diff > 0 and nums[i] > maxVal) {
            maxVal = nums[i];
            ops++;
        }
        if (nums[i] == 0)
            maxVal = 0;
    }
    return ops;
}

int main() {
    int n;
    cin >> n;
    
    vector<int> nums(n);
    for(int i=0; i<n; i++){
        cin >> nums[i];
    }
    
    int ans = solve(n, nums);
    cout << ans << endl;
    return 0;
}


-----------------

int solve(int n, vector<int>& nums){
    stack<int> st;
    set<int> s;
    for(int i=n-1; i>=0; i--){
        while(!st.empty() && nums[i] > nums[st.top()]){
            st.pop();
        }
        if(!st.empty()) s.insert(nums[st.top()]);
        st.push(i);
    }
    return s.size();
}


=====================================


#include <iostream>
#include <stack>
#include <vector>
using namespace std;
 
string input;
 
void InputData() {
    cin >> input;
}
 
int index(char ch) {
    if (ch == '(' or ch == ')')
        return 0;
    else if (ch == '{' or ch == '}')
        return 1;
    else if (ch == '[' or ch == ']')
        return 2;
    return -1;
}
 
bool isValidFormat(char ch1, char ch2) {
    if (ch1 == '(')
        return ch2 == ')';
    else if (ch1 == '{')
        return ch2 == '}';
    else if (ch1 == '[')
        return ch2 == ']';
    return false;
}
 
int solve() {
    stack<char> s;
    int maxLen = 0;
    vector<vector<int>> len(3);
    for (int i = 0; i < input.length(); i++) {
        char ch = input[i];
 
        if (ch == '(' || ch == '{' || ch == '[') {
            s.push(ch);
            len[index(ch)].push_back(i);
        }
        else {
            if (isValidFormat(s.top(), ch)) {
                s.pop();
                maxLen = max(maxLen, i - len[index(ch)].back());
                len[index(ch)].pop_back();
            }              
        }
    }
    if (!s.empty())
        return -1;
    return maxLen;
}
 
int main() {
    int ans = -1;
    InputData();
 
    ans = solve();
    cout << ans;
    return 0;
}
